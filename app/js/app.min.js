function goto(a){var b=location.protocol+"//"+location.host+"/"+base_url+"?#/";location.href=b+a,$(location).attr("href",b+a),location.reload()}function isMobile(){var a=!1;return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),a}function sendRequest(a){var b=new Parse.Query("User");b.get(a,{success:function(a){console.log(a.id);var b=Parse.Object.extend("Request"),c=new Parse.Query(b);c.equalTo("to_user",a),c.lessThan("status",2),c.find({success:function(c){if(0==c.length){var d=new b;d.set("from_user",Parse.User.current()),d.set("to_user",a),d.set("status",0),d.save(),toast("Request Sent!",4e3)}},error:function(){}})},error:function(){}})}function updateCourse(a){var b=new Parse.Query("UserProfile");b.limit(1),b.equalTo("userID",Parse.User.current()),b.first().then(function(b){containsCourse(b.get("courseList"),a)?(b.remove("courseList",a),$("#ico_"+a).removeClass("red-text mdi-content-clear"),$("#ico_"+a).addClass("mdi-content-add")):(b.addUnique("courseList",a),$("#ico_"+a).removeClass("mdi-content-add"),$("#ico_"+a).addClass("red-text mdi-content-clear")),b.save()})}function containsCourse(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1}function getQueryVariable(a){if(void 0===window.location.href.split("?")[window.location.search.split("?").length+1])return!1;for(var b=window.location.href.split("?")[window.location.search.split("?").length+1],c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(e[0]==a)return e[1]}return!1}var DEBUG=!1;Parse.$=jQuery,Parse.initialize("mxpAxRbhZmodDXNvsW2aQBSk4eoMdDmxmCXVajY1","oBnSRa41KipKeIaiCuAgkYqxmPsXRhHkGZA8IyTN");var app=angular.module("WeStudeeApp",["ngRoute","ngAnimate","parse-angular"]);if(app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"partials/dashboard.html"}).when("/signup",{templateUrl:"partials/signup.html",controller:"CreateAccountCtrl"}).when("/signup_success",{templateUrl:"partials/signup_success.html"}).when("/activated",{templateUrl:"partials/confirm.html"}).when("/reconfirm",{templateUrl:"partials/reconfirm.html"}).when("/send_reconfirm",{templateUrl:"partials/resend_confirm.html"}).when("/invalid",{templateUrl:"partials/invalid.html"}).when("/reset",{templateUrl:"partials/pw_reset.html"}).when("/reset_success",{templateUrl:"partials/reset_success.html"}).when("/login",{templateUrl:"partials/login.html",controller:"LoginCtrl"}).when("/forgot",{templateUrl:"partials/forgot.html",controller:"ForgotCtrl"}).when("/forgot_sent",{templateUrl:"partials/forgot_sent.html"}).when("/logout",{templateUrl:"partials/logout.html"}).when("/profile",{templateUrl:"partials/profile.html",controller:"ProfileCtrl"}).when("/profile_edit",{templateUrl:"partials/profile_edit.html",controller:"ProfileEditCtrl"}).when("/profile_view",{templateUrl:"partials/profile_view.html",controller:"ProfileViewCtrl"}).when("/profile_setup",{templateUrl:"partials/profile_setup.html",controller:"ProfileSetupCtrl"}).when("/courses",{templateUrl:"partials/courses.html",controller:"CourseCtrl"}).when("/courses_setup",{templateUrl:"partials/courses_setup.html",controller:"CourseCtrl"}).otherwise({redirect:"/"}),Parse.User.current()||(location.href="?#/login")}]),Parse.User.current())if(Parse.User.current().get("emailVerified")===!1)console.log(Parse.User.current().get("emailVerified"));else{var UserProfile=Parse.Object.extend("UserProfile"),query=new Parse.Query("UserProfile");query.equalTo("userID",Parse.User.current()),query.find({success:function(a){var b=a[0];void 0===b.get("about")&&void 0===b.get("major")&&void 0===b.get("prefEmail")&&void 0===b.get("availability")&&void 0===b.get("courseList")&&-1==document.URL.indexOf("profile_setup")&&goto("profile_setup")}})}var base_url="WeStudee/app/";app.controller("NavigationCtrl",function(a){function b(){var b=new Parse.Query("Request");b.equalTo("status",0);var c=new Parse.Query("Request");c.equalTo("status",1);var d=new Parse.Query.or(b,c);d.equalTo("to_user",a.user),d.limit(1),d.find({success:function(a){if(!(a.length>0)||$("#notif").hasClass("blue-text")&&$("#mobile-nav").hasClass("blue-text")||($("#notif").addClass("blue-text"),$("#mobile-nav").addClass("blue-text")),a.length>0){$("#notification_dropdown").empty();for(var b=0;b<a.length;b++){var c=new Parse.Query(Parse.User);c.equalTo("objectId",a[b].get("from_user").id),c.find({success:function(a){$("#notification_dropdown").append("<li>"+a[0].get("first_name")+" "+a[0].get("last_name")+" sent you a study request."+"</li>")}})}}},error:function(a){console.log("Error: "+a.code+" "+a.message)}})}function c(){var b=new Parse.Query("Messages");b.equalTo("to_user",a.user),b.equalTo("status",0),b.limit(1),b.find({success:function(a){!(a.length>0)||$("#msg").hasClass("blue-text")&&$("#mobile-nav").hasClass("blue-text")||($("#msg").addClass("blue-text"),$("#mobile-nav").addClass("blue-text"))},error:function(a){console.log("Error: "+a.code+" "+a.message)}})}a.user=Parse.User.current(),b(),setInterval(function(){var b=new Parse.Query("Request");b.equalTo("to_user",a.user),b.equalTo("status",0),b.limit(1),b.find({success:function(a){if(a.length>0){var b=new Parse.Query(Parse.User);b.equalTo("objectId",a[0].get("from_user").id),b.find({success:function(a){!(a.length>0)||$("#notif").hasClass("blue-text")&&$("#mobile-nav").hasClass("blue-text")||($("#notif").addClass("blue-text"),$("#mobile-nav").addClass("blue-text")),toast(a[0].get("first_name")+" "+a[0].get("last_name")+" sent you a study request.",5e3),$("#notification_dropdown").empty(),$("#notification_dropdown").append("<li>"+a[0].get("first_name")+" "+a[0].get("last_name")+" sent you a study request."+"</li>")}})}},error:function(a){console.log("Error: "+a.code+" "+a.message)}})},1e4),a.akNotif=function(){($("#notif").hasClass("blue-text")||$("#mobile-nav").hasClass("blue-text"))&&($("#notif").removeClass("blue-text"),$("#mobile-nav").removeClass("blue-text"));var b=Parse.Object.extend("Request"),c=new Parse.Query(b);c.equalTo("to_user",a.user),c.lessThan("status",2),c.find({success:function(a){if(a.length>0)for(var b=0;b<a.length;b++)a[b].set("status",2),a[b].save()},error:function(){}})},c(),setInterval(function(){var b=new Parse.Query("Messages");b.equalTo("to_user",a.user),b.equalTo("status",0),b.find({success:function(a){!(a.length>0)||$("#msg").hasClass("blue-text")&&$("#mobile-nav").hasClass("blue-text")||($("#msg").addClass("blue-text"),$("#mobile-nav").addClass("blue-text"))},error:function(a){console.log("Error: "+a.code+" "+a.message)}})},1e4),a.akMessage=function(){console.log("test"),($("#msg").hasClass("blue-text")||$("#mobile-nav").hasClass("blue-text"))&&($("#msg").removeClass("blue-text"),$("#mobile-nav").removeClass("blue-text"));var b=Parse.Object.extend("Messages"),c=new Parse.Query(b);c.equalTo("to_user",a.user),c.lessThan("status",1),c.find({success:function(a){if(console.log(a.length),a.length>0)for(var b=0;b<a.length;b++)a[b].set("status",1),a[b].save()},error:function(){}})}}),app.controller("DashboardCtrl",function(a){a.user=Parse.User.current(),a.course=[];var b=new Parse.Query("UserProfile");b.limit(1),b.equalTo("userID",Parse.User.current()),b.first().then(function(b){a.userprofile=b;for(var c=0;c<b.get("courseList").length;c++){var d=new Parse.Query("Courses");d.get(b.get("courseList")[c],{success:function(b){$("#course_list").append("<li><div class='collapsible-header white-text blue lighten-1'>"+b.get("courseName")+"</div>"+"<div class='collapsible-body grey lighten-3'>"+"<div id='"+b.id+"' class='row' style='padding: 0 24px;'>"+"</div>"+"</div>"+"</li>");var c=new Parse.Query("UserProfile");c.equalTo("schoolID",a.userprofile.get("schoolID")),c.find(function(c){for(var d=0;d<c.length;d++)if(containsCourse(c[d].get("courseList"),b.id)&&c[d].get("userID").id!==a.user.id){var e=new Parse.Query("User");e.get(c[d].get("userID").id,{success:function(c){var d=new Parse.Query("UserProfile");d.equalTo("userID",c),d.limit(1),d.find({success:function(d){var e=new Parse.Query("School");e.equalTo("objectId",d[0].get("schoolID").id),e.find({success:function(e){$("#"+b.id).append("<div class='col l3 m12'><div class='card'><div class='card-image waves-effect waves-block waves-light'><img class='activator' src='img/app/profile_cover.png'></div><div class='card-content'><span class='card-title activator'><a class='blue-text' href='?#/profile_view?id="+c.id+"' onClick='goto(\"profile_view?id="+c.id+"\")'>"+c.get("first_name")+" "+c.get("last_name")+"</a><i class='mdi-navigation-more-vert right grey-text text-darken-4'></i></span>"+"<span class='votes'>0 VOTES</span>"+"</div>"+"<div class='card-reveal card_detail'>"+"<span class='card-title grey-text text-darken-4'>"+c.get("first_name")+" "+c.get("last_name")+" <i class='mdi-navigation-close right'></i></span>"+"<span class='dt_head'>"+e[0].get("schoolName")+"</span>"+"<span class='dt_head'>"+d[0].get("major")+"</span>"+"<div class='day_available_header'>Available:</div>"+"<div class='day_available text-center'>"+"<div class='day "+a.availClass(d[0].get("availability")[0])+"' data-toggle='tooltip' data-placement='bottom' title='"+a.getTooltip(d[0].get("availability")[0])+"'>Su</div>"+"<div class='day "+a.availClass(d[0].get("availability")[1])+"' data-toggle='tooltip' data-placement='bottom' title='"+a.getTooltip(d[0].get("availability")[1])+"'>M</div>"+"<div class='day "+a.availClass(d[0].get("availability")[2])+"' data-toggle='tooltip' data-placement='bottom' title='"+a.getTooltip(d[0].get("availability")[2])+"'>T</div>"+"<div class='day "+a.availClass(d[0].get("availability")[3])+"' data-toggle='tooltip' data-placement='bottom' title='"+a.getTooltip(d[0].get("availability")[3])+"'>W</div>"+"<div class='day "+a.availClass(d[0].get("availability")[4])+"' data-toggle='tooltip' data-placement='bottom' title='"+a.getTooltip(d[0].get("availability")[4])+"'>Th</div>"+"<div class='day "+a.availClass(d[0].get("availability")[5])+"' data-toggle='tooltip' data-placement='bottom' title='"+a.getTooltip(d[0].get("availability")[5])+"'>F</div>"+"<div class='day "+a.availClass(d[0].get("availability")[6])+"' data-toggle='tooltip' data-placement='bottom' title='"+a.getTooltip(d[0].get("availability")[6])+"'>Sa</div>"+"</div>"+"<a onClick='sendRequest(\""+c.id+"\")' class='waves-effect waves-light btn white-text blue lighten-1'><i class='mdi-content-send'></i> Send Request</a></center>"+"</div>"+"</div></div>")}})},error:function(){}})},error:function(){}})}})},error:function(){console.log("error!!!!")}})}}),a.getTooltip=function(a){var b="";return 0==a&&(b="None"),(1==a||4==a||5==a||7==a)&&(b+="Morning "),(2==a||4==a||6==a||7==a)&&(b+="Afternoon"),(3==a||5==a||6==a||7==a)&&(b+=" Night"),b},a.availClass=function(a){return 0!=a?"available":"navailable"}}),app.controller("CreateAccountCtrl",function(a){a.submit=function(){if(void 0===a.first_name||""===a.first_name||void 0===a.last_name||""===a.last_name||void 0===a.email||""===a.email||void 0===a.password||""===a.password||void 0===a.gender)$(".cardform-error").html("Please do not leave anything blank.");else{var b=new Parse.User;b.set("username",a.email),b.set("password",a.password),b.set("first_name",a.first_name),b.set("last_name",a.last_name),b.set("email",a.email),b.set("gender",a.gender),b.signUp(null,{success:function(b){var c=a.email.substr(a.email.indexOf("@")+1),d=new Parse.Query("School");d.equalTo("email_format",c),d.find({success:function(a){var c=Parse.Object.extend("UserProfile"),d=new c;d.set("userID",b),0!=a.length&&d.set("schoolID",a[0]),d.save(),location.href="?#/signup_success"},error:function(){}})},error:function(a,b){-1==b.code&&$(".cardform-error").html("Please do not leave any fields blank."),202==b.code&&$(".cardform-error").html("This email is registered. <a href='?#/login'>Sign in</a> now.")}})}}}),app.controller("LoginCtrl",function(a){Parse.User.current()&&(location.href="?#/"),a.login=function(){void 0===a.email||""===a.email||void 0===a.password||""===a.password?$(".cardform-error").html("Please do not leave anything blank."):Parse.User.logIn(a.email,a.password,{success:function(){location.href="#/"},error:function(){$(".cardform-error").html("Email or Password is Incorrect")}})}}),app.controller("ForgotCtrl",function(a){a.submit=function(){void 0===a.email||""===a.email?$(".cardform-error").html("Please do not leave anything blank."):Parse.User.requestPasswordReset(a.email,{success:function(){location.href="?#/forgot_sent"},error:function(){$(".cardform-error").html("The provided email is invalid.")}})}}),app.controller("ProfileSetupCtrl",function(a){function c(a){switch(a){case"Sunday":return 0;case"Monday":return 1;case"Tuesday":return 2;case"Wednesday":return 3;case"Thursday":return 4;case"Friday":return 5;case"Saturday":return 6}}function d(a){0==a?($("#morning").prop("checked",!1),$("#afternoon").prop("checked",!1),$("#night").prop("checked",!1)):1==a?($("#morning").prop("checked",!0),$("#afternoon").prop("checked",!1),$("#night").prop("checked",!1)):2==a?($("#morning").prop("checked",!1),$("#afternoon").prop("checked",!0),$("#night").prop("checked",!1)):3==a?($("#morning").prop("checked",!1),$("#afternoon").prop("checked",!1),$("#night").prop("checked",!0)):4==a?($("#morning").prop("checked",!0),$("#afternoon").prop("checked",!0),$("#night").prop("checked",!1)):5==a?($("#morning").prop("checked",!1),$("#afternoon").prop("checked",!0),$("#night").prop("checked",!0)):6==a?($("#morning").prop("checked",!0),$("#afternoon").prop("checked",!1),$("#night").prop("checked",!0)):7==a&&($("#morning").prop("checked",!0),$("#afternoon").prop("checked",!0),$("#night").prop("checked",!0))}function e(a,b,c){for(var d="",e=0;e<a.length;e++)d+=e==b?c:a[e];return d}function f(){return $("#morning").is(":checked")?$("#afternoon").is(":checked")?$("#night").is(":checked")?7:4:$("#night").is(":checked")?5:1:$("#afternoon").is(":checked")?$("#night").is(":checked")?6:2:$("#night").is(":checked")?3:0}a.user=Parse.User.current();var b=new Parse.Query("UserProfile");b.limit(1),b.equalTo("userID",a.user),b.first().then(function(b){if(b){a.usrprofile=b;var c=new Parse.Query("School");c.limit(1),c.first().then(function(b){a.usrprofile_school=b,a.pro_school=b.get("schoolName"),a.pro_loc=b.get("city")+", "+b.get("state")})}}),a.avail="0000000",a.updt_dayView=function(){var b=c(a.availability);d(a.avail[b])},a.uptd_checkData=function(){var b=c(a.availability);a.avail=e(a.avail,b,f())},a.processForm=function(){if(void 0!==a.pro_about&&void 0!==a.pro_major&&void 0!==a.pro_loc&&void 0!==a.pro_email){console.log("Processing form!");var b=new Parse.Query("UserProfile");b.equalTo("userID",Parse.User.current()),b.first().then(function(b){console.log(b.length),b.set("about",a.pro_about),b.set("major",a.pro_major),b.set("location",a.pro_location),b.set("prefEmail",a.pro_email),b.set("availability",a.avail),b.addUnique("courseList",""),b.save(),goto("courses_setup")})}else window.scrollTo(0,0),$(".cardform-error").text("Error: Please do not leave any of the fields blank.")}}),app.controller("ProfileCtrl",function(a){a.user=Parse.User.current();var b=new Parse.Query("UserProfile");b.limit(1),b.equalTo("userID",a.user),b.first().then(function(b){if(b){a.usrprofile=b;for(var c=0;c<b.get("courseList").length;c++){var d=new Parse.Query("Courses");d.get(b.get("courseList")[c],{success:function(a){$("#courses").append("<li class='collection-item'><strong>"+a.get("courseName")+"</strong> ("+a.get("subjectID")+" "+a.get("courseID")+")</li>")},error:function(){}})}var e=new Parse.Query("School");e.limit(1),e.first().then(function(b){a.usrprofile_school=b})}}),a.getTooltip=function(a){var b="";return 0==a&&(b="None"),(1==a||4==a||5==a||7==a)&&(b+="Morning "),(2==a||4==a||6==a||7==a)&&(b+="Afternoon"),(3==a||5==a||6==a||7==a)&&(b+=" Night"),b},a.gotoEdit=function(){goto("courses")}}),app.controller("ProfileEditCtrl",function(a){function c(a){switch(a){case"Sunday":return 0;case"Monday":return 1;case"Tuesday":return 2;case"Wednesday":return 3;case"Thursday":return 4;case"Friday":return 5;case"Saturday":return 6}}function d(a){0==a?($("#morning").prop("checked",!1),$("#afternoon").prop("checked",!1),$("#night").prop("checked",!1)):1==a?($("#morning").prop("checked",!0),$("#afternoon").prop("checked",!1),$("#night").prop("checked",!1)):2==a?($("#morning").prop("checked",!1),$("#afternoon").prop("checked",!0),$("#night").prop("checked",!1)):3==a?($("#morning").prop("checked",!1),$("#afternoon").prop("checked",!1),$("#night").prop("checked",!0)):4==a?($("#morning").prop("checked",!0),$("#afternoon").prop("checked",!0),$("#night").prop("checked",!1)):5==a?($("#morning").prop("checked",!1),$("#afternoon").prop("checked",!0),$("#night").prop("checked",!0)):6==a?($("#morning").prop("checked",!0),$("#afternoon").prop("checked",!1),$("#night").prop("checked",!0)):7==a&&($("#morning").prop("checked",!0),$("#afternoon").prop("checked",!0),$("#night").prop("checked",!0))}function e(){return $("#morning").is(":checked")?$("#afternoon").is(":checked")?$("#night").is(":checked")?7:4:$("#night").is(":checked")?5:1:$("#afternoon").is(":checked")?$("#night").is(":checked")?6:2:$("#night").is(":checked")?3:0}function f(a,b,c){for(var d="",e=0;e<a.length;e++)d+=e==b?c:a[e];return d}a.user=Parse.User.current();var b=new Parse.Query("UserProfile");b.limit(1),b.equalTo("userID",a.user),b.first().then(function(b){if(b){a.usrprofile=b,a.pro_about=b.get("about"),a.pro_major=b.get("major"),a.pro_email=b.get("prefEmail"),a.avail=b.get("availability"),d(a.avail[0]);var c=new Parse.Query("School");c.limit(1),c.first().then(function(b){a.usrprofile_school=b,a.pro_school=b.get("schoolName"),a.pro_loc=b.get("city")+", "+b.get("state")});for(var e=0;e<b.get("courseList").length;e++){var f=new Parse.Query("Courses");f.get(b.get("courseList")[e],{success:function(a){$("#courses").append("<li class='collection-item'><strong>"+a.get("courseName")+"</strong> ("+a.get("subjectID")+" "+a.get("courseID")+")</li>")},error:function(){}})}var c=new Parse.Query("School");c.limit(1),c.first().then(function(b){a.usrprofile_school=b})}}),a.getTooltip=function(a){var b="";return 0==a&&(b="None"),(1==a||4==a||5==a||7==a)&&(b+="Morning "),(2==a||4==a||6==a||7==a)&&(b+="Afternoon"),(3==a||5==a||6==a||7==a)&&(b+=" Night"),b},a.updateProfile=function(){var b=Parse.Object.extend("UserProfile"),c=new Parse.Query(b);c.equalTo("userID",a.user),c.find({success:function(b){if(b.length>0)for(var c=0;c<b.length;c++)b[c].set("about",a.pro_about),b[c].set("major",a.pro_major),b[c].set("prefEmail",a.pro_email),b[c].set("availability",a.avail),b[c].save(),toast("Profile Updated!",4e3)},error:function(){}})},a.updt_dayView=function(){var b=c(a.availability);d(a.avail[b])},a.uptd_checkData=function(){var b=c(a.availability);a.avail=f(a.avail,b,e())},a.gotoEdit=function(){goto("courses")}}),app.controller("ProfileViewCtrl",function(a){(0==getQueryVariable("id")||getQueryVariable("id")==Parse.User.current())&&goto("/");var b=new Parse.Query("User");b.get(getQueryVariable("id"),{success:function(b){a.user=b;var c=new Parse.Query("UserProfile");c.limit(1),c.equalTo("userID",b),c.first().then(function(b){if(console.log(b),b){a.usrprofile=b;for(var c=0;c<b.get("courseList").length;c++){var d=new Parse.Query("Courses");d.get(b.get("courseList")[c],{success:function(a){$("#courses").append("<li class='collection-item'><strong>"+a.get("courseName")+"</strong> ("+a.get("subjectID")+" "+a.get("courseID")+")</li>")},error:function(){}})}var e=new Parse.Query("School");e.limit(1),e.first().then(function(b){a.usrprofile_school=b})}})}}),a.getTooltip=function(a){var b="";return 0==a&&(b="None"),(1==a||4==a||5==a||7==a)&&(b+="Morning "),(2==a||4==a||6==a||7==a)&&(b+="Afternoon"),(3==a||5==a||6==a||7==a)&&(b+=" Night"),b},a.gotoEdit=function(){goto("courses")}}),app.controller("CourseCtrl",function(a){a.user=Parse.User.current();var b=new Parse.Query("UserProfile");b.limit(1),b.equalTo("userID",a.user),b.first().then(function(b){a.usrprofile=b;var c=new Parse.Query("Subjects");c.equalTo("schoolID",b.get("schoolID").id),c.ascending("subjectName"),c.find(function(b){a.subjects=b;for(var c=0;c<b.length;c++)isMobile()?$("#subj").append():$("#sub").append($("<option></option>").prop("value",b[c].get("subjectID")).text(b[c].get("subjectName")));$("select").material_select()})}),a.checkDropdown=function(){var b=new Parse.Query("UserProfile");b.limit(1),b.equalTo("userID",Parse.User.current()),b.first().then(function(b){var c=new Parse.Query("Courses");c.equalTo("schoolID",b.get("schoolID").id),c.startsWith("subjectID",a.dp_sub),c.find(function(a){$("#cour").empty();for(var c=0;c<a.length;c++)containsCourse(b.get("courseList"),a[c].id)?$("#cour").append("<li class='collection-item' onClick='updateCourse(\""+a[c].id+"\", this)'><div>"+a[c].get("courseName")+"<a class='secondary-content' onClick='updateCourse(\""+a[c].id+"\", this)'><i id='ico_"+a[c].id+"' class='Small mdi-content-clear red-text'></i></a></div></li>"):$("#cour").append("<li class='collection-item' onClick='updateCourse(\""+a[c].id+"\", this)'><div>"+a[c].get("courseName")+"<a class='secondary-content' onClick='updateCourse(\""+a[c].id+"\", this)'><i id='ico_"+a[c].id+"' class='Small mdi-content-add'></i></a></div></li>")})})},a.checkMobile=isMobile()});
